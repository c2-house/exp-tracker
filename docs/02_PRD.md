# Shelfie 앱 제품 요구사항 정의서 (PRD)

## 1. 개요 (Overview)

### 1.1. 제품명

Shelfie (셸피, 가제)

### 1.2. 목표 (Goal)

OCR(광학 문자 인식) 기술을 활용하여 사용자가 식품, 화장품 등 유통기한이 있는 제품을 최소한의 노력으로 등록하고, 소비기한 임박 알림을 통해 잊고 버리는 일을 방지하도록 돕는다. 이를 통해 사용자의 불필요한 지출을 줄이고 음식물 쓰레기 감소에 기여하는 것을 목표로 한다.

### 1.3. 배경 (Background)

많은 소비자가 구매한 제품의 소비기한을 잊어버려 결국 버리게 되는 문제를 겪고 있다. 이는 개인에게는 금전적 손실이며, 사회적으로는 자원 낭비 및 환경 문제로 이어진다. 기존의 관리 앱들은 수동 입력의 번거로움이라는 큰 허들을 가지고 있다. Shelfie는 'OCR을 통한 자동 인식'이라는 기술적 해결책을 통해 이 문제를 혁신적으로 해결하고자 한다.

### 1.4. 성공 지표 (Success Metrics for MVP)

- **사용자 확보:** MVP 출시 후 3개월 내 월 활성 사용자(MAU) 1,000명 달성
- **사용자 만족도:** 앱스토어 평점 4.5점 이상 달성
- **핵심 기능 사용률:** 신규 사용자 중 70% 이상이 OCR 등록 기능을 1회 이상 사용
- **사용자 유지율(Retention):** 1주차 재방문율 40% 이상 달성

## 2. 타겟 사용자 (Target Audience)

### 2.1. 주요 타겟 (Primary)

- **페르소나 1: 계획적 소비를 지향하는 1인 가구 직장인 (김민준, 28세)**
  - **특징:** 바쁜 생활 속에서 건강과 절약을 모두 챙기고 싶어 한다. 장을 봐와도 잊어버리고 버리는 음식이 많아 죄책감을 느낀다. 스마트폰 앱 사용에 익숙하며, 자신의 삶을 효율적으로 관리해주는 도구를 선호한다.
  - **요구사항:** "퇴근길에 장을 봐도, 사진 한 번만 찍으면 알아서 유통기한을 관리해주면 좋겠어. 뭐가 곧 상하는지 알려주면 저녁 메뉴 정하기도 편할 텐데."

### 2.2. 부가 타겟 (Secondary)

- **페르소나 2: 가족의 먹거리를 관리하는 주부 (박서연, 40세)**
  - **특징:** 가족의 건강을 위해 신선한 식재료를 구매하고 관리하는 것을 중요하게 생각한다. 냉장고에 물건이 많아 안쪽에 있는 식재료를 잊어버리는 경우가 잦다. 다양한 화장품도 보유하고 있어 개봉 후 사용기한 관리에도 관심이 많다.
  - **요구사항:** "우리 가족이 먹는 거니까 유통기한 관리는 필수야. 화장품도 개봉하면 언제까지 써야 하는지 헷갈리는데, 같이 관리되면 정말 편할 것 같아."

## 3. 기능 명세 (Features & Requirements for MVP)

### Epic 1: 간편 등록

**사용자가 제품을 쉽고 빠르게 목록에 추가할 수 있게 하는 핵심 기능.**

#### User Story 1.1 (Form 기반 등록 및 유통기한 OCR)

사용자는 상품 등록 폼에서 입력하기 귀찮은 '유통기한'만큼은 카메라로 찍어서 자동으로 입력하고 싶다. 타이핑은 최소화하면서 가장 번거로운 날짜 입력을 간편하게 처리할 수 있다.

- **요구사항:**
  1. 메인 화면(화면 1)의 '+' 플로팅 액션 버튼(FAB)을 탭하면, **'상품 등록 폼' 화면 (화면 2)**으로 즉시 이동한다. (카메라를 거치지 않음)
  2. '상품 등록 폼'에는 상품명(TextInput), 유통기한(Date Input), 카테고리(Button) 필드가 포함된다.
  3. '유통기한' 필드 우측에는 '카메라' 아이콘 버튼이 위치한다. 사용자는 Date Input을 통해 유통기한을 직접 입력하거나, 카메라 버튼을 탭하여 촬영할 수 있다.
  4. '카메라' 버튼을 탭하면, 유통기한 인식을 위한 전용 **'유통기한 OCR 스캐너' 화면 (화면 2.5)**이 열린다.
  5. '유통기한 OCR 스캐너' 화면에는 유통기한 부분을 맞출 수 있도록 안내하는 가이드라인 오버레이를 표시한다.
  6. 촬영 후, 텍스트 인식 중임을 알리는 로딩 인디케이터를 표시한다.
  7. 다양한 날짜 형식(예: YYYY.MM.DD, YYYY년 MM월 DD일, YY.MM.DD, ~까지)을 인식하고, 표준 형식(YYYY-MM-DD)으로 변환하여 처리한다.
  8. 스캔이 완료되면, 사용자는 '상품 등록 폼'(화면 2)으로 자동 복귀하며, '유통기한' 필드에 인식된 날짜가 자동으로 채워진다.
  9. '카테고리'는 버튼 형태로 제공되며(예: 냉장식품, 냉동식품, 실온식품, 화장품 등), 사용자는 탭하여 하나만 선택할 수 있다.
  10. 사용자는 '저장' 버튼을 눌러 등록을 완료할 수 있다.

### Epic 2: 스마트 목록 관리

**등록된 제품을 한눈에 파악하고 효율적으로 관리하는 기능.**

#### User Story 2.1 (목록 조회 및 정렬)

사용자는 등록한 제품 목록을 유통기한이 임박한 순서대로 보고 싶다.

- **요구사항:**
  1. 앱의 메인 화면은 제품 목록 뷰이다.
  2. 각 리스트 아이템에는 제품 사진, 제품명, 남은 일수(D-Day), 유통기한이 표시된다.
  3. 기본 정렬 순서는 유통기한이 임박한 순(오름차순)이다.
  4. 남은 일수에 따라 색상으로 긴급도를 시각적으로 표시한다. (예: 6일 이상-초록, 1~5일-노랑, 0일 이하-빨강)
  5. 카테고리별로 목록을 필터링하여 볼 수 있는 기능을 제공한다.

#### User Story 2.2 (제품 정보 수정 및 삭제)

사용자는 등록된 제품의 정보를 수정하거나 목록에서 삭제하고 싶다.

- **요구사항:**
  1. 리스트에서 특정 제품을 탭하면 상세 정보 화면으로 이동한다.
  2. 상세 화면에서는 등록된 모든 정보(이름, 유통기한, 카테고리, 개봉 여부 등)를 수정할 수 있다.
  3. 삭제 버튼을 제공하며, 실수로 삭제하는 것을 방지하기 위해 "정말 삭제하시겠어요?" 확인 팝업을 표시한다.

#### User Story 2.3 (개봉 후 사용기한 관리)

사용자는 화장품이나 소스류처럼 개봉한 제품의 사용기한을 별도로 관리하고 싶다.

- **요구사항:**
  1. 제품 상세 화면에 '개봉' 상태를 기록할 수 있는 토글 또는 버튼을 제공한다.
  2. '개봉'으로 상태 변경 시, 개봉일이 자동으로 기록된다.
  3. 사용자는 자동 입력된 개봉일을 수정할 수 있다.
  4. '개봉 후 사용기한'(PAO, Period After Opening)을 별도로 설정할 수 있는 기능을 제공한다. (예: 12개월)
  5. PAO가 설정된 제품은 유통기한과 별개로 PAO 기준의 임박 알림을 받는다.

### Epic 3: 푸시 알림 (로컬)

**사용자가 제품을 잊지 않고 소비하도록 돕는 기능.**

#### User Story 3.1 (유통기한 임박 알림)

사용자는 제품의 유통기한이 다가오면 푸시 알림을 받고 싶다.

- **요구사항:**
  1. 앱 최초 실행 시 푸시 알림 수신 동의를 요청한다.
  2. 설정 화면에서 알림 시점(예: 7일 전, 3일 전, 1일 전, 당일)과 시간을 사용자가 직접 설정할 수 있다.
  3. 푸시 알림 메시지에는 어떤 제품이 언제 만료되는지 명확한 정보가 포함되어야 한다. (예: "Shelfie: 서울우유의 유통기한이 3일 남았어요!")
  4. 알림을 탭하면 앱이 실행되며 해당 제품이 있는 목록으로 바로 이동한다.
  5. 이 알림은 `expo-notifications`를 통해 **기기 내에서 스케줄링(Local Scheduling)**되어야 하며, 백엔드 서버(FCM)를 필요로 하지 않는다.

### Epic 4: 프리미엄 기능 (Premium Features - MVP)

**사용자가 유료 구독 시 사용할 수 있는 부가 기능.**

#### User Story 4.1 (데이터 백업)

유료 사용자는 앱을 삭제하거나 기기를 변경해도 데이터를 잃지 않도록, 자신의 데이터를 안전하게 백업하고 싶다.

- **요구사항:**
  1. 설정 화면에 '프리미엄' 메뉴를 제공한다.
  2. 유료 구독자는 Firebase Authentication(Google, Apple 등)을 통해 로그인할 수 있다.
  3. 로그인 시, 로컬 저장소(`AsyncStorage`)의 모든 데이터를 Firestore의 사용자 고유 UID 경로에 업로드(백업)하는 기능을 제공한다.

#### User Story 4.2 (데이터 복원)

유료 사용자는 새 기기에서 앱을 설치했을 때, 기존에 백업해 둔 데이터를 그대로 복원하고 싶다.

- **요구사항:**
  1. 로그인 시, Firestore에 백업된 데이터가 있는지 확인한다.
  2. '복원하기' 기능을 실행하면, Firestore의 데이터를 로컬 `AsyncStorage`로 다운로드하여 기존 데이터를 덮어쓴다.
  3. **[중요]** 데이터 복원이 완료된 직후, 앱은 로컬 DB의 모든 상품을 순회하며 **로컬 알림(Epic 3)을 새 기기에 다시 스케줄링해야 한다.**

## 4. MVP 범위에서 제외되는 사항 (Out of Scope for MVP)

- **Phase 2 기능:** 레시피 추천, 장보기 목록 연동, 가족/팀 공유, 소비 패턴 통계
- **Phase 3 기능:** 영수증 스캔, AI 이미지 인식을 통한 제품명 자동 입력, 다중 상품 일괄 등록
- **실시간 데이터 동기화:** 여러 기기 간 데이터의 실시간 동기화 (MVP는 '백업/복원'만 지원)
- **서버 기반 알림 (FCM):** 서버(Firebase Functions)가 푸시 알림을 발송하는 기능. (MVP는 100% 로컬 스케줄링 알림만 지원)
- **기타:** 태그 기능, 바코드 스캔을 통한 등록, 웹 버전
