# Shelfie 앱 와이어프레임 명세

기준 문서: `02_PRD.md`

## 화면 흐름 1: 상품 등록 (유통기한 OCR 우선)

**사용자 목표:** 가장 귀찮은 유통기한은 찍어서 입력하고, 나머지는 빠르게 작성하여 등록한다. (PRD User Story 1.1)

### 화면 1: 메인 목록 화면 (Main List Screen)

사용자가 등록한 제품 목록을 확인하고, 새로운 제품을 추가하는 앱의 시작점.

#### 구성 요소

1. 헤더 (Header)

   - **좌측:** 앱 로고 (Shelfie)
   - **우측:** 검색 아이콘 (돋보기 모양), 알림 아이콘 (종 모양)

2. 필터 및 정렬 (Filter & Sort)

   - **카테고리 필터:** 아이콘 기반의 수평 스크롤 리스트 (예: 전체, 냉장, 냉동, 실온, 욕실/화장대). 선택된 필터는 시각적으로 강조 표시.
   - **상품 개수:** 카테고리 필터 하단 좌측 끝에 선택된 카테고리 내 상품 개수 표시.
   - **정렬 옵션:** 카테고리 필터 하단 우측 끝에 현재 정렬 기준 텍스트 버튼 (예: 임박순)을 배치. 탭하면 정렬 기준 변경 옵션(최신 등록순, 이름순 등) 제공.

3. 상품 목록 (Product List)

   - **상태 A: Populated State (목록 있음)**
     - 수직 스크롤이 가능한 카드 형태의 리스트.
     - **카드 구성 요소:**
       - **사진:** 좌측에 제품 이미지 표시.
       - **상품명:** 우측 상단에 굵은 텍스트로 표시.
       - **D-Day:** 우측 중간에 남은 기간에 따라 색상이 변경되는 텍스트로 강조 표시 (예: D-2).
       - **유통기한:** 우측 하단에 전체 날짜 표시 (예: 2025.10.28 까지).
     - **카드 아이템의 동작 (Interactions):**
       - **탭 (Tap):** '화면 5: 상품 상세 화면'으로 전환된다.
       - **왼쪽으로 스와이프 (Swipe Left):** 카드 오른쪽에 [삭제] 버튼이 나타난다.
         - **[삭제] 버튼 탭:** 삭제 이유를 묻는 확인 팝업 (선택지: '유통기한 지나 폐기', '실수로 잘못 등록')을 표시한 후, 선택에 따라 데이터를 기록하고 목록에서 제거한다.
       - **길게 누르기 (Long Press):** 빠른 조작 메뉴(Context Menu)를 표시한다.
         - **메뉴 옵션:**
           - **[✔️ 사용 완료]:** 상품을 성공적으로 소비했음을 의미한다. '성공' 데이터로 기록되며 목록에서 제거된다.
           - **[🗑️ 삭제]:** 탭하면 '스와이프로 삭제' 시와 동일하게 삭제 이유를 묻는 확인 팝업이 나타난다.
           - **[✏️ 수정]:** '화면 5: 상품 상세 화면'으로 전환된다.
   - **상태 B: Empty State (목록 없음)**
     - 화면 중앙에 안내 일러스트와 텍스트를 표시.
     - **안내 문구:** "아직 등록된 상품이 없네요! n 아래 '+' 버튼을 눌러 첫 상품을 등록해보세요."

4. 상품 추가 버튼 (Floating Action Button)
   - 화면 우측 하단에 항상 떠 있는 원형의 '+' 아이콘 버튼.
   - **동작:** 탭하면 **'화면 2: 유통기한 OCR 스캐너'**으로 이동한다.

### 화면 2: 유통기한 OCR 스캐너 (Expiry Date Scanner)

#### 개요

- 목적: OCR 인식을 위해 유통기한을 촬영하는 화면. 사용자가 쉽고 정확하게 촬영하도록 안내한다.
- 진입점: 화면 1에서 (+) FAB 탭.
- 파일 경로: `app/scan-product.tsx`

#### 구성 요소

1. 카메라 뷰 (Camera View)

   - 전체 화면을 차지하며, 기기의 후면 카메라를 통해 실시간 영상을 보여준다.

2. 가이드라인 오버레이 (Guideline Overlay)

   - 화면 중앙에 유통기한 텍스트를 조준할 수 있는 가이드라인을 표시한다.
   - 화면 상단에 "상품의 유통기한을 찍어주세요"와 같은 텍스트를 표시하여 사용자 행동을 유도한다.

3. 하단 컨트롤 바 (Bottom Control Bar)

   - (중앙) **촬영 버튼 (Shutter Button):** 가장 크고 눈에 띄는 원형 버튼.
   - (좌측) **갤러리 아이콘 (Gallery Icon):** 이미 촬영된 사진을 불러올 수 있는 보조 기능.
   - (우측) **플래시 아이콘 (Flash Icon):** 탭하여 플래시를 켜거나 끌 수 있는 기능 (자동/On/Off).
   - (중앙) **건너뛰기 버튼 (Text Button):** "직접 입력할게요" -> 탭하면 빈 폼(화면 3)으로 이동.

4. 상단 컨트롤 바 (Top Control Bar)
   - (좌측) **닫기 아이콘 (Close Icon 'X'):** 촬영을 취소하고 '화면 1: 메인 목록 화면'으로 돌아간다.

#### 동작

- 사진 촬영/선택 시, 카메라 뷰 대신 촬영/선택된 사진을 전체화면에 배경으로 보여준다.
- 앱이 이미지에서 텍스트를 분석하고 추출하는 동안 로딩 화면을 잠시 표시한다.
- **인식 성공 시:** 날짜 데이터를 `params`에 담아 '화면 3'으로 자동 이동.
- **인식 실패 시:** 화면 이동 없이 현재 스캐너 뷰를 유지하며, 하단에 "유통기한을 찾을 수 없어요. 다시 촬영하거나 직접 입력해주세요." 토스트 메시지 표시.

### 화면 3: 상품 등록 폼 (Add Product Form)

#### 개요

- 목적: OCR 결과(날짜)를 바탕으로 나머지 정보를 입력하고 저장을 완료.
- 진입점: 화면 2에서 촬영 완료 또는 건너뛰기.
- 파일 경로: `app/add-product.tsx` (신규 생성)

#### 구성 요소

1. 헤더

   - **좌측:** 'X' 버튼 (뒤로가기)
   - **중앙:** '상품 추가' (타이틀)

2. 유통기한 필드 (Auto-filled)

   - **데이터:** 화면 2에서 인식된 날짜가 기본값으로 입력됨. 건너뛰기로 진입 시 비어 있음.
   - **시각적 피드백:** 화면 진입 시 해당 필드의 배경색이 잠시 반짝이거나(Flash), 테두리가 강조색으로 표시되어 사용자의 시선을 유도.
   - **안내 메시지:** 필드 하단에 "날짜가 맞는지 확인해주세요." 등의 유도 문구 표시.
   - **수정:** 필드 탭 시 Date Picker가 열려 즉시 수정 가능.

3. 상품명 필드 (Required): `TextInput`
4. 카테고리 선택 (Required): 원형 아이콘 버튼 중에서 탭하여 한 개 선택
5. 푸터: '저장하기' 버튼 (모든 필수 필드 입력 시 활성화)

### 화면 4: 등록 완료 후 메인 목록 (Updated Main List Screen)

새로운 상품 등록을 완료하고 돌아온 메인 목록 화면.

#### 구성 요소

1. **업데이트된 목록:** '화면 1'과 동일한 구조에, 방금 등록한 새로운 상품이 추가되어 있다.
2. **확인 메시지 (Toast Popup):** 화면 하단에 "새로운 상품이 등록되었어요!"와 같은 메시지가 잠시 나타났다가 사라져 사용자에게 작업이 성공적으로 완료되었음을 알려준다.

## 화면 흐름 2: 상품 상세 조회 및 수정

**사용자 목표:** 등록된 제품의 상세 정보를 확인하고, 정보를 수정하거나 삭제하며, 재고 및 개봉 여부를 관리한다.

### 화면 5: 상품 상세 화면 (Product Detail Screen)

사용자가 메인 목록에서 특정 상품을 탭했을 때 진입하는 화면. 상품의 모든 정보를 조회하고 관리하는 기능을 제공한다.

#### 구성 요소

1. 헤더 (Header)

   - (좌측) **뒤로가기 아이콘 ('<'):** 탭하면 '화면 1: 메인 목록 화면'으로 돌아간다.
   - (우측) **삭제 아이콘 (휴지통 모양):** 탭하면 메인 목록에서와 동일하게 삭제 이유를 묻는 확인 팝업을 띄운 후 상품을 삭제한다.

2. 상품 이미지 (Product Image)

   - 화면 상단에 사용자가 등록한 상품 이미지를 크게 표시한다. 이미지를 탭하면 사진을 변경(새로 촬영/갤러리에서 선택)할 수 있다.

3. 핵심 정보 영역 (Primary Info Area)

   - **상품명:** 굵고 큰 텍스트로 표시. 탭하면 텍스트 필드로 전환되어 수정 가능.
   - **D-Day 및 유통기한:** 남은 기간과 실제 유통기한 날짜를 함께 표시. 탭하면 Date Picker가 나타나 날짜 수정 가능.

4. 상세 정보 영역 (Secondary Info Area)

   - **카테고리:** 현재 설정된 카테고리와 이름 표시. 탭하면 카테고리 선택 화면으로 이동.
   - **개봉 여부 관리 (PRD 2.3):**
     - **레이블:** '개봉'
     - **컨트롤:** **토글 스위치**를 제공하여 개봉 상태를 On/Off 할 수 있다.
     - **조건부 표시:** 토글이 'On' 상태일 때만 아래 항목들이 나타난다.
       - **개봉일:** 상태 변경 시 기록된 날짜를 표시 (예: '개봉일: 2025.10.20'). 탭하면 Date Picker가 나타나 날짜 수정 가능.

## 화면 흐름 3: 푸시 알림

### 화면 6: 알림 목록 화면 (Notification List Screen)

#### 개요

- **목적:** 사용자에게 발송되었던 모든 푸시 알림 이력을 보여주고, 개별 알림을 탭하여 해당 상품 상세 화면으로 이동할 수 있도록 합니다.
- **진입점:** 메인 화면(화면 1) 상단의 알림 아이콘 탭, 또는 푸시 알림 직접 탭 시 (앱 실행 중/백그라운드 시)

#### 구성 요소

1.  **헤더 (Header):**
    - **뒤로 가기 버튼 (`<`):** 이전 화면(주로 메인 화면)으로 돌아갑니다.
    - **화면 제목:** "알림 목록"
2.  **전체 읽음 버튼 (Mark All as Read):** 모든 알림을 "읽음" 상태로 변경합니다.
3.  **알림 아이템 (Notification Item):**

    - **스타일:** 읽지 않은 알림은 primary color로 dot를 표시하고 background color를 다르게 합니다.
    - **제목:** "[상품명] 유통기한 D-X" 또는 "[상품명] 오늘까지!"
    - **내용:** 상세 알림 메시지 ("[상품명]의 유통기한이 X일 남았습니다.")
    - **시간 정보:** 알림이 발송된 날짜 (예: "2023-10-27")
    - **상호작용:** 탭하면 해당 알림과 관련된 상품의 상세 화면(화면 2)으로 이동합니다.

4.  **빈 상태 (Empty State):**
    - 알림이 없을 경우 "받은 알림이 없습니다." 등의 메시지를 표시합니다.

#### 동작

- 앱 시작 시 백그라운드에서 푸시 알림 권한을 확인하고 요청합니다.
- 유통기한 임박 상품에 대해 주기적으로 로컬/원격 푸시 알림을 발송합니다.
- 알림을 탭하면 앱이 실행되거나 포그라운드로 전환되며, 해당 알림의 상품 상세 화면으로 이동합니다.
- '전체 읽음으로 표시' 버튼을 누르면 모든 알림이 읽음 상태로 바뀝니다.
- 알림 목록은 최신순으로 정렬됩니다.
- 스크롤을 통해 과거 알림을 확인할 수 있습니다.
